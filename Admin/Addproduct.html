<html>

<head>
    <title>Addproduact</title>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Athiti&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css" rel="stylesheet"
        type="text/css">
    <link rel="stylesheet" type="text/css" href="styles/addproduct.css">
</head>

<body>
    <!-- Navbar Section Start-->
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand active" href="index2.html">ร้านรับทำแผ่นรองเมาส์</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="Addproduct.html">AddProduct</a></li>
                    <li><a href="table.html">รายละเอียดของลูกค้า</a></li>
                    <li><a href="Customer.html">ข้อมูลของลูกค้า</a></li>
                    <li><a href="logout.html">logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="header">
        <div id="about">
        <div class="card">

            <div class="page-content" style="padding-top: 60px;" align="center">
                <!-- Your content goes here -->
                <h4>Add Data</h4>
                <form>
                    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">

                        <tbody>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric">neme</td>
                                <td>
                                    <div class="mdl-textfield mdl-js-textfield">
                                        <input class="mdl-textfield__input" type="title" id="name">
                                        <label class="mdl-textfield__label" for="title">name...</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric">price</td>
                                <td>
                                    <div class="mdl-textfield mdl-js-textfield">
                                        <input class="mdl-textfield__input" type="text" id="price"></input>
                                        <label class="mdl-textfield__label" for="content">price...</label>
                                    </div>

                                </td>
                            </tr>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric">Image</td>
                                <td>
                                    <div class="mdl-textfield mdl-js-textfield">
                                        <input type="file" id="fileButton" />
                                    </div>
                                </td>

                            </tr>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric">
                                    <button id="add-data" onclick="Product()"
                                        class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent">
                                        Submit
                                    </button>
                                </td>
                                <td>

                                </td>
                            </tr>


                        </tbody>
                    </table>
                </form>



                <!--Insert JS-->

                <!-- The core Firebase JS SDK is always required and must be listed first -->
                <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>

                <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
                <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-analytics.js"></script>
                <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-firestore.js"></script>
                <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-database.js"></script>
                <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-storage.js"></script>



                <script>
                    // Your web app's Firebase configuration
                    var firebaseConfig = {
                        apiKey: "AIzaSyDutywZbJz62aT2SqSgkPWJU0_lU5OIsjE",
                        authDomain: "project-8cea8.firebaseapp.com",
                        databaseURL: "https://project-8cea8.firebaseio.com",
                        projectId: "project-8cea8",
                        storageBucket: "project-8cea8.appspot.com",
                        messagingSenderId: "915660167642",
                        appId: "1:915660167642:web:1e56f8dd9cbc511f4508e3",
                        measurementId: "G-MDK8FVSGYM"
                    };


                    // Initialize Firebase
                    var thumbnail;

                    firebase.initializeApp(firebaseConfig);
                    firebase.analytics();
                    var database = firebase.database();

                    var fileButton = document.getElementById("fileButton")
                    fileButton.addEventListener('change', function (e) {
                        var file = e.target.files[0];
                        //put img
                        var storageRef = firebase.storage().ref(file.name);
                        storageRef.put(file);
                        thumbnail = "https://firebasestorage.googleapis.com/v0/b/" + firebaseconfig["storageBucket"] + "/o/" + file.name + "?alt=media";
                    });

                    function Product() {
                        var name = document.getElementById('name');
                        var price = document.getElementById('price');



                        insert(name.value, price.value, fileButton.value)

                    }

                    function insert(name, price, thumbnail) {

                        var firebaseRef = firebase.database().ref("product");
                        firebaseRef.push({
                            name: name,
                            price: price,
                            thumbnail: thumbnail

                        });

                        alert(firebaseRef);
                        console.log("firebaseRef" + firebaseRef.snapshot.value());


                    }

                </script>


            </div>
        </div>
        </div>
    </header>

</body>




</html>